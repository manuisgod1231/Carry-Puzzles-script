-- Load OrionLib
local OrionLib = loadstring(game:HttpGet(('https://raw.githubusercontent.com/GRPGaming/Key-System/refs/heads/Xycer-Hub-Script/ZusumeLib(Slider)')))()

-- Create Window
local Window = OrionLib:MakeWindow({
    Name = "ChatGPT Hub",
    HidePremium = false,
    SaveConfig = true,
    ConfigFolder = "ChatGPT_Hub"
})

-- Create Tab
local Tab = Window:MakeTab({
	Name = "Combat",
	Icon = "rbxassetid://4483345998",
	PremiumOnly = false
})

-- Create Toggle Section
local Section = Tab:AddSection({Name = "Auto Attack"})

-- Toggle logic
local autoAttack = false

Tab:AddToggle({
	Name = "Enable Auto Attack",
	Default = false,
	Save = true,
	Flag = "AutoAttack",
	Callback = function(Value)
		autoAttack = Value
	end
})

-- Attack Logic
task.spawn(function()
    local ReplicatedStorage = game:GetService("ReplicatedStorage")
    local Players = game:GetService("Players")
    local LocalPlayer = Players.LocalPlayer
    local RemoteEvent = ReplicatedStorage:WaitForChild("NetworkEvents"):WaitForChild("RemoteEvent")

    -- Wait for workspace.LivingThings
    local LivingThings
    repeat
        LivingThings = workspace:FindFirstChild("LivingThings")
        task.wait(1)
    until LivingThings

    repeat task.wait() until LocalPlayer.Team

    local zombieNames = {
        ["ZombieNpc"] = true,
        ["NpcSummonedZombie"] = true,
        ["Necromancer"] = true
    }

    local function isAlive(character)
        local humanoid = character:FindFirstChild("Humanoid")
        return humanoid and humanoid.Health > 0
    end

    -- Attack loop
    while true do
        if autoAttack then
            for _, npc in pairs(LivingThings:GetChildren()) do
                if zombieNames[npc.Name] and isAlive(npc) then
                    RemoteEvent:FireServer("GUN_DAMAGE", npc)
                end
            end
            for _, player in pairs(Players:GetPlayers()) do
                if player ~= LocalPlayer and player.Team ~= LocalPlayer.Team and player.Character and isAlive(player.Character) then
                    RemoteEvent:FireServer("GUN_DAMAGE", player.Character)
                end
            end
        end
        task.wait(0.05)
    end
end)

-- Init GUI
OrionLib:Init()
